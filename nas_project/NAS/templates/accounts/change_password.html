<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥ - NAS„Ç∑„Çπ„ÉÜ„É†</title>
    <style> 
        body { 
            font-family: "Segoe UI", sans-serif; 
            background-color: #E3F2FD; 
            margin: 0; display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh; 
            padding-top: 40px; 
        } 
        .content { 
            width: 90%; 
            max-width: 500px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px 0; 
            box-sizing: border-box; 
        } 
        .top-bar {
            width: 100%;
            display: flex;
            justify-content: flex-start;
            margin-bottom: 20px;
        }
        h2 { 
            width: 100%; 
            text-align: center; 
            color: #333; 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 30px; 
            margin-top: 0; 
        } 
        #errorMessage { 
            color: #dc3545; 
            font-weight: bold; 
            font-size: 14px; 
            margin-bottom: 15px; 
            text-align: center; 
            display: none; 
            width: 100%; 
            padding: 10px; 
            background-color: #f8d7da; 
            border: 1px solid #f5c6cb; 
            border-radius: 6px; 
            box-sizing: border-box; 
        } 
        .form-container { 
            background-color: white; 
            padding: 30px 40px; 
            border-radius: 8px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
            width: 100%; 
            box-sizing: border-box; 
        } 
        .input-group { 
            margin-bottom: 25px; 
        } 
        .input-group label { 
            display: block; 
            font-size: 14px; 
            color: #555; 
            font-weight: bold; 
            margin-bottom: 8px; 
        } 
        .input-group label span { 
            font-size: 12px;
            color: #888; 
            font-weight: normal; 
            margin-left: 5px; 
        } 
        .password-wrapper { 
            position: relative; 
            width: 100%; 
        } 
        .password-wrapper input { 
            width: 100%; 
            padding: 10px 50px 10px 12px; 
            border: 1px solid #ccc; 
            border-radius: 6px; 
            font-size: 16px; 
            font-family: "Segoe UI", sans-serif; 
            box-sizing: border-box; 
        } 
        .toggle-password { 
            position: absolute; 
            right: 1px; 
            top: 1px; 
            bottom: 1px; 
            border: none; 
            background-color: #f8f8f8; 
            color: #555; 
            cursor: pointer; 
            padding: 0 12px; 
            border-radius: 0 6px 6px 0; 
            transition: background-color 0.2s; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        } 
        .toggle-password:hover { 
            background-color: #eee; 
        } 
        .toggle-password svg { 
            width: 20px; 
            height: 20px; 
            stroke: #555; 
        } 
        .register-button { 
            background-color: #4a90e2; 
            color: white; 
            border: none; 
            padding: 12px 30px; 
            border-radius: 6px; 
            font-size: 18px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: background-color 0.2s; 
            display: block; 
            margin: 30px auto 0 auto; 
            width: 150px; 
        } 
        .register-button:hover { 
            background-color: #357ABD; 
        } 
    </style>
</head>
<body>
    <div class="content">
        <div class="top-bar">
            <button class="back-button" onclick="location.href='{{ back_url}}'">‚Üê Êàª„Çã</button>
        </div>
        <h2>„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</h2>

        {% if error_message %}
            <div class="message error">{{ error_message }}</div>
        {% elif success_message %}
            <div class="message success">{{ success_message }}</div>
        {% endif %}

        <div class="form-container">
            <form method="post" action="{% url 'accounts:change_password' %}">
                {% csrf_token %}
                
                <div class="input-group">
                    <label for="current_password">ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <div class="password-wrapper">
                        <input type="password" name="current_password" id="current_password" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('current_password', this)">üëÅ</button>
                    </div>
                </div>

                <div class="input-group">
                    <label for="new_password">Êñ∞Ë¶è„Éë„Çπ„ÉØ„Éº„Éâ <span style="font-size:12px; color:#777;">Ôºà8ÊñáÂ≠ó‰ª•‰∏äÔºâ</span></label>
                    <div class="password-wrapper">
                        <input type="password" name="new_password" id="new_password" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('new_password', this)">üëÅ</button>
                    </div>
                </div>

                <div class="input-group">
                    <label for="confirm_password">Á¢∫Ë™çÁî®„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <div class="password-wrapper">
                        <input type="password" name="confirm_password" id="confirm_password" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('confirm_password', this)">üëÅ</button>
                    </div>
                </div>

                <button type="submit" class="register-button">Â§âÊõ¥</button>
            </form>
        </div>
    </div>

    <script>
        function togglePassword(id, button) {
            const input = document.getElementById(id);
            if (input.type === "password") {
                input.type = "text";
                button.textContent = "üôà";
            } else {
                input.type = "password";
                button.textContent = "üëÅ";
            }
        }
        
    </script>
</body>
</html>
